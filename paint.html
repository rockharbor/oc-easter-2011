<!--


NOTES:
---------------------------
* make sure to get description and keywords from jeff




-->

<!DOCTYPE html>
<html>
	<head>
		<title>OC Easter</title>
		<meta charset="utf-8" />
		<meta name="title" content="OC Easter" />
		<meta name="description" content="Orange County Easter celebration at the Fairgrounds" />
		<meta name="keywords" content="orange county, easter, fairgrounds, francis chan" />
		<!--[if lt IE 9]>
		<script src="js/html5.js"></script>
		<script src="js/excanvas.js"></script>
		<![endif]-->
		<script type="text/javascript" src="js/jquery.js"></script>
		<script type="text/javascript">
			var ie = document.layers ? true : false;
			var width, height, brush;

			$(document).ready(function() {
				var scratch = document.getElementById('scratch');
				width = scratch.width;
				height = scratch.height;

				$('#scratch').css({position: 'absolute', zIndex: 3});
				$('#canvases').append($('#scratch').clone().attr('id', 'secret').css({zIndex:2}));
				$('#canvases').append($('#scratch').clone().attr('id', 'background').css({zIndex:1}));

				if (scratch.getContext) {
					var bkgContext = document.getElementById('background').getContext('2d');
					var secretContext = document.getElementById('secret').getContext('2d');
					var scratchContext = document.getElementById('scratch').getContext('2d');

					var bkg = new Image();
					bkg.src = 'background.png';
					bkg.onload = function() {
						bkgContext.drawImage(bkg, 0, 0);
					}
					
					var secret = new Image();
					secret.src = 'secret.png';
					secret.onload = function() {
						secretContext.drawImage(secret, width/2-secret.width/2, height/2-secret.height/2);
					}

					scratchContext.fillColor = 'rgb(0, 0, 0);';
					scratchContext.fillRect(0, 0, width, height);
		
					$('#scratch').click(draw);
					$('#scratch').mousedown(startDrag);
					$('#scratch').mouseup(stopDrag);
					$('#scratch').mouseleave(stopDrag);
				}
			});

			function startDrag() {
				$('#scratch').mousemove(draw);
			}

			function stopDrag() {
				$('#scratch').unbind('mousemove', draw);
			}

			function draw(event) {
				var context = document.getElementById('scratch').getContext('2d');
				context.globalCompositeOperation = 'destination-out';

				var mouseX = event.pageX - $('#scratch').offset().left;
				var mouseY = event.pageY - $('#scratch').offset().top;

				if (brush == undefined) {
					brush = new Image();
					brush.src = 'brush.png';
					brush.onload = function() {
						context.drawImage(brush, mouseX-this.width/2, mouseY-this.height/2);
					}
				} else {
					context.drawImage(brush, mouseX-brush.width/2, mouseY-brush.height/2);
				}
			}
		</script>
		<link rel="stylesheet" type="text/css" href="css/reset.css" />
		<link rel="stylesheet" type="text/css" href="css/960.css" />
		<style type="text/css">
			#canvases {
				position:relative;
			}
		</style>
	</head>
	<body>
		<div id="wrapper">
			<nav></nav>
			<header></header>
			<section>
				<div>
					Paint away!
				</div>
				<div id="canvases">
					<canvas id="scratch" width="400" height="280"></canvas>
				</div>
			</section>
		</div>
	</body>
</html>
